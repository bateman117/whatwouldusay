<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>To You Who I Call Love</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Keep Dancing Script for most, add Poppins for letter lines -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;600&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      background: linear-gradient(to bottom, #fdeff2, #f8bbd0);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      font-family: 'Dancing Script', cursive;
      padding: 15px;
      box-sizing: border-box;
      text-align: center;
    }

    .envelope {
      width: 95vw;
      max-width: 420px;
      height: 380px;
      background: #f48fb1;
      border-radius: 16px;
      position: relative;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      overflow: hidden;
      cursor: pointer;
      perspective: 1200px;
      transition: height 0.6s ease;
    }

    .envelope.open {
      height: 780px;
    }

    .flap {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #f06292;
      transform-origin: top;
      transform: rotateX(0deg);
      transition: transform 1s ease;
      z-index: 3;
      border-radius: 16px;
      box-shadow: inset 0 -4px 15px rgba(255, 255, 255, 0.2);
    }

    .envelope.open .flap {
      transform: rotateX(-180deg);
    }

    .seal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(1);
      width: 60px;
      height: 60px;
      background: radial-gradient(circle at 50% 40%, #6a141a, #3b0b0f 80%);
      border-radius: 50%;
      box-shadow: inset 0 5px 10px rgba(180, 50, 50, 0.8),
                  0 4px 12px rgba(70, 10, 10, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #e9bcbc;
      font-size: 2rem;
      font-weight: 900;
      letter-spacing: 0.03em;
      z-index: 4;
      transition: opacity 0.5s ease, transform 0.3s ease;
      user-select: none;
    }

    .seal.press {
      animation: pressSeal 0.3s ease forwards;
    }

    @keyframes pressSeal {
      0%   { transform: translate(-50%, -50%) scale(1); }
      50%  { transform: translate(-50%, -48%) scale(0.95); }
      100% { transform: translate(-50%, -50%) scale(1); }
    }

    .envelope.open .seal {
      opacity: 0;
      transform: translate(-50%, -50%) scale(0);
    }

    .paper {
      position: absolute;
      top: 40px;
      left: 5%;
      width: 90%;
      height: calc(100% - 80px);
      max-height: 650px;
      background: white url('https://www.transparenttextures.com/patterns/paper-fibers.png') repeat;
      background-size: 120px 120px;
      border-radius: 0 0 12px 12px;
      opacity: 0;
      pointer-events: none;
      transform: translateY(20px);
      transition: opacity 0.8s ease 0.4s, transform 0.8s ease 0.4s;
      box-sizing: border-box;
      box-shadow: 0 6px 18px rgba(0,0,0,0.1);
      z-index: 1;
      display: flex;
      flex-direction: column;
      clip-path: polygon(0 20px, 50% 0, 100% 20px, 100% 100%, 0% 100%);
      padding: 2.2rem 1.5rem 1rem;
      overflow-y: auto;
    }

    .envelope.open .paper {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }

    /* Letter lines use Poppins */
    #letter {
      flex-grow: 1;
      font-family: 'Poppins', sans-serif;
      font-size: 1.1rem;
      line-height: 1.7rem;
      color: #5c0b2d;
      user-select: text;
      letter-spacing: 0.02em;
      text-shadow: 0.5px 0.5px 0.5px rgba(139, 69, 90, 0.15);
    }

    .line {
      opacity: 0;
      margin-bottom: 0.7rem;
      animation: handwriting 0.4s ease forwards;
    }

    @keyframes handwriting {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .button-row {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-top: 1rem;
    }

    /* Buttons & other text keep Dancing Script */
    .next-button,
    .song-button {
      font-family: 'Dancing Script', cursive;
      font-weight: 500;
      font-size: 1.2rem;
      color: #6a1b4d;
      background: linear-gradient(135deg, #f8bbd0, #f48fb1);
      border: none;
      border-radius: 30px;
      padding: 0.6rem 2rem;
      cursor: pointer;
      text-decoration: none;
      box-shadow: 0 6px 12px rgba(244, 143, 177, 0.4);
      transition: all 0.3s ease;
      max-width: 260px;
      display: inline-block;
      opacity: 0;
      pointer-events: none;
      text-align: center;
    }

    .next-button.visible,
    .song-button.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .next-button:hover,
    .song-button:hover {
      background: linear-gradient(135deg, #f48fb1, #f06292);
      box-shadow: 0 10px 20px rgba(244, 143, 177, 0.6);
      transform: scale(1.05);
    }

    .or-text {
      font-family: 'Dancing Script', cursive;
      font-weight: 600;
      color: #6a1b4d;
      font-size: 1.3rem;
      user-select: none;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
    }

    .envelope.open .or-text {
      opacity: 1;
      pointer-events: auto;
    }

  </style>
</head>
<body>

  <div class="envelope" id="envelope" tabindex="0" role="button" aria-label="Letter envelope. Press Enter or click to open.">
    <div class="flap"></div>
    <div class="seal" id="seal">M</div>
    <div class="paper" id="paper">
      <div id="letter"></div>
      <div class="button-row">
        <a href="ask.html" class="next-button" id="nextButton">Stop wasting my time</a>
        <div class="or-text">OR</div>
        <a href="aboutyou.html" class="song-button" id="songButton">little smth that reminds me of you</a>
      </div>
    </div>
  </div>

  <audio id="sealSound" src="https://cdn.pixabay.com/download/audio/2022/03/01/audio_2c0d6a6e4e.mp3?filename=paper-open-116994.mp3" preload="auto"></audio>
  <audio id="hoverSound" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_67e2697633.mp3?filename=paper-flip-6852.mp3" preload="auto"></audio>

  <script>
    const envelope = document.getElementById('envelope');
    const letter = document.getElementById('letter');
    const nextButton = document.getElementById('nextButton');
    const songButton = document.getElementById('songButton');
    const seal = document.getElementById('seal');
    const sealSound = document.getElementById('sealSound');
    const hoverSound = document.getElementById('hoverSound');

    const letterLines = [
      "To you who I call love, Minahil",
      "",
      "Hi, we’ve definitely had our ups and downs, but that’s part of any relationship.",
      "I really don’t know how to start this one off.",
      "I've been working on this website for a while, but I really wish I never would have had to make it.",
      "I wish I could look you in those pretty big brown eyes and tell you how, your beauty wraps around me quietly",
      "",
      "But this is not the end of the world, and neither was it when I fell in love with you.",
      "Your love shrinks me back to the child i was, scared to lose something close to me.",
      "I tremble at the thought of never again hearing you talk about how much you love mushrooms and chocolate and then listen to you disapprove any and every opinnion of mine",
      "You have humbled me in a way I could never ask for.",
      "You’re all I think about, no matter the time of day. I see you in every beautiful thing, you are all that beauty, personified.",
      "",
      "I have never wished for something in my life like I wish to feel your warmth.",
      "Every time we talk and you tell me that you love me,",
      "the world feels a little nicer and warmer, making it all seem not so bad.",
      "",
      "But still, there’s a lot we both need to work on together,",
      "and we will be together every step of the way.",
      "And I will keep hoping that one day you understand the depth of my love—",
      "not just that it’s there.",
      "",
      "I love you, you'll always be my pretty lady",
      "",
      "- I did not wish to make this so formal lol"
    ];

    function showLetterLines() {
      letter.innerHTML = "";
      letterLines.forEach((line, i) => {
        const div = document.createElement('div');
        div.className = 'line';
        div.style.animationDelay = `${i * 0.2}s`;
        div.textContent = line;
        letter.appendChild(div);
      });
    }

    function openLetter() {
      if (envelope.classList.contains('open')) return;
      envelope.classList.add('open');
      seal.classList.add('press');
      sealSound.currentTime = 0;
      sealSound.play();
      showLetterLines();
      nextButton.classList.remove('visible');
      songButton.classList.remove('visible');
      setTimeout(() => {
        nextButton.classList.add('visible');
        songButton.classList.add('visible');
        seal.classList.remove('press');
      }, letterLines.length * 200 + 300);
    }

    envelope.addEventListener('click', openLetter);
    envelope.addEventListener('touchstart', e => {
      e.preventDefault();  // prevent double trigger on some mobile browsers
      openLetter();
    });
    envelope.addEventListener('keydown', e => {
      if ((e.key === 'Enter' || e.key === ' ') && !envelope.classList.contains('open')) {
        e.preventDefault();
        openLetter();
      }
    });

    envelope.addEventListener('mouseenter', () => {
      if (!envelope.classList.contains('open')) {
        hoverSound.currentTime = 0;
        hoverSound.volume = 0.15;
        hoverSound.play();
      }
    });
  </script>
</body>
</html>
